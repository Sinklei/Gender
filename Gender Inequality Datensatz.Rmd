---
title: "Gender Inequality Index"
author: "Linda Sinani"
date: "17 7 2021"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

library(tidyverse)

options(digits = 3)
GII <- read_csv("data/to_work_with/GII.csv")
View(GII)
```

## Was ist der Gender Inequality Index?

misst geschlechtsspezifische Ungleichheiten auf 3 Ebenen der menschlchen Entwicklung in 162 Ländern:
1. reproduktive Gesundheit -> gemessen an der Müttersterblichkeitsrate + Geburtenate bei Jugendlichen 
2.Empowerment/Selbstbestimmung -> gemessen an Anteil der von Frauen besetzten Parlamentssitze, Anteil Frauen über 25 im Vergleich zu Männern, die mindestens Sekundarabschluss haben 
3. wirtschaftlicher Status -> Vergleich Männer + Frauen: Arbeitsmarktbeteiligung, gemessen an Erwerbsquote der weiblichen + männlichen Bevölkerung ab 15 Jahren 

## Was zeigt er? 

den Verlust an potenzieller menschlicher Entwicklung aufgrund der Ungleichheit zwischen den Leistungen von Frauen und Männern in den 3 Bereichen. Der GII spiegelt wider, wie sehr Frauen in diesen Bereichen benachteiligt sind

Der GII liegt zwischen 0 und 1. Je höher der GII-Wert ist, desto größer sind die Ungleichheiten zwischen Frauen und Männern und desto größer ist der Verlust für die menschliche Entwicklung.

Es gibt kein Land mit perfekter Gleichstellung der Geschlechter. Alle Länder erleiden einen gewissen Verlust an Errungenschaften in Schlüsselaspekten der menschlichen Entwicklung, wenn die Ungleichheit der Geschlechter berücksichtigt wird.Die Komponentenindikatoren zeigen Bereiche auf, in denen kritische politische Maßnahmen erforderlich sind, und sie regen proaktives Denken und öffentliche Maßnahmen zur Überwindung systematischer Benachteiligungen von Frauen an.
Er kann Regierungen und anderen helfen, das Ausmaß der geschlechtsspezifischen Ungleichheiten bei der Teilhabe zu verstehen. Die einzelnen Indikatoren zeigen Bereiche auf, in denen die Politik dringend eingreifen muss. 

## Limitationen 

GII hat einige Einschränkungen (wie es bei zusammengesetzen/umfassenden Messungen üblich ist): 

misst nicht die Länge und Breite der Ungleichheit zwischen den Geschlechtern. Erfassung zB parlamentare Vertretung auf nationaler Ebenene, nicht aber auf lokaler Regierungsebene und in anderen Bereichen des öffentlichen kommunalen Lebens. 

Bei der Arbeitsmarktbeteiligung fehlen Daten über die Qualität der Arbeitsplätze. Generell werden wichtige Dimensionen des beruflichen Lebens außer Acht gelassen: unbezahlte Arbeit + Fakt, dass Frauen typischrweise die Aufgabe der Haushaltsführung + Pflege zugesprochen wird. 

Was im GII aufgrund von fehlenden Daten nicht berücksichtigt wird: 
Vermögenseigentum
Unterstützung bei der Kinderbetreuung 
geschlechtsspezifische Gewalt 
Beteiligung an kommunalen Entscheidungsprozessen 

## Quellen vom GII

GII stützt sich auf öffentlichen Daten aus internationalen Datenbanken:

- Müttersterblichkeitsrate: WHO, UNICEF,UNFPA, World Bank Group and United Nations Population Division (2019)

- Geburtenrate bei Jugendlichen: UNDESA (2019)

- Frauenanteil Sitze im Parlament: IPU (2020)

- Arbeitsmarktbeteiligung: International Labour Organization ILO (2020)

- Vergleich Frau Mann Sekundärabschluss: UNESCO Institute for Statistics (2020) and
Barro and Lee (2018)

QUELLE: http://hdr.undp.org/en/faq-page/gender-inequality-index-gii#t294n2913
Berechnungen der Indizes: http://hdr.undp.org/sites/default/files/hdr2020_technical_notes.pdf

## WAS wir mit dem Datensatz visualisieren können: 

Deutschland im internationalen Vergleich.
Deutschland im europäischen Vergleich?
Erstmal zeigen, was die 3 besten und 3 schlechtesten Länder sind im GII Ranking 
Wo steht Deutschland im GII Ranking? Welche Länder sind unmittelbar davor und danach? 
Mit den Ländern vergleichen: Ist dort die Müttersterblchkeitsrate niedriger? weniger Parlamentssitze? weniger Frauen mit Sekundärabschluss? 
Ist irgendwas unterwartet? zB Dass Deutschland vor Japan ist aber in Japan mehr Frauen im Parlament sitzen (nur als Beispiel gedacht!)

## WAS + WIE wir visualisieren können:

1. interaktive Landkarte/ Heatmap um ersten Überblick zu bekommen: GII Value + Ländername wird angezeigt wenn man über die Länder geht + man kann rein zoomen. Zusätzlich durch Farbskala anzeigen, ob
Wert hoch oder niedrig ist https://espace-mondial-atlas.sciencespo.fr/en/topic-contrasts-and-inequalities/map-1C37-EN-human-development-index-gender-development-index-ecological-footprintandnbsp.html

Was man dann sehen wird: In Europa ist der Wert besser als in arabischen/ afrikanischen Ländern 

2. barchart: um zu bestimmen, was die Länder mit den besten und schlechtesten Werten sind: GII Rank auf der x Achse und der GII Value auf der y-Achse -> schlechteste, beste + Deutschland in 1 Barplot: alle die nicht relevant sind werden mit Punkten dargestellt

am schlechteten: Jemen, Papua Neuguinea, Chad, Zentrlische Afrikanische Republik
am besten: Schweiz, Dänemark, Schweden, Niederlande


3. Werte der Variablen für die Länder (schlechteste, beste + DL): Mütteryterblichkeitsrate, Jugendgeburtenrate, Sitze im Parlament als einzelne Barchart Visualisierungen 

Sekundarabschluss + Arbeitsmarktbeteiligung als einzelne Visualisierungen in Form einer Alterspyramide: Werte für m + f rechts und links 

Als Info: Hättet ihr gedacht, dass DL hinter arabischen Emirate + Korea liegt?

Wo steckt Deutschland?  GII Rannking auf Platz 20 + Wert 0,084
 Arabischen Emirate (Platz 18, Value 0,079) und Republik Korea ist (Platz 11, 0,064) 
 -> zeigt die Limitationen des Konstrukts (siehe oben)

```{r setup, include=FALSE}

arrange(GII,GII_Rank)
```


## Landkarte  
```{r setup, include=FALSE}

# Landkarte herunterladen 

download.file("http://thematicmapping.org/downloads/TM_WORLD_BORDERS_SIMPL-0.3.zip" , destfile="data/world_shape_file.zip")

list.files("data/world_shape_file")

library(raster)

my_spdf <- shapefile("data/world_shape_file/TM_WORLD_BORDERS_SIMPL-0.3.shp")

# Basic (unwichtig)
par(mar=c(0,0,0,0))
plot(my_spdf, col="#f2f2f2", bg="skyblue", lwd=0.25, border=0 )

library(rgdal)
library(maptools)
if (!require(gpclib)) install.packages("gpclib", type="source")
gpclibPermit()

library(broom)
spdf_fortified <- tidy(my_spdf, region = "NAME")


library(ggplot2)
ggplot() +
  geom_polygon(data = spdf_fortified, aes( x = long, y = lat, group = group), fill="#69b3a2", color="white") +
  theme_void() 

# background map 

library(leaflet)

m <- leaflet()
m <- addTiles(m)
m

# zoom auf Deutschland

m <- leaflet(spdf_fortified)%>% addTiles()  %>% setView( lat=51.1642292, lng=10.4541194 , zoom=5) %>%
  addPolygons(lat=51.1642292, lng=10.4541194, stroke = FALSE, fillOpacity = 0.5, smoothFactor = 0.5)
m

library(htmlwidgets)
saveWidget(m, file=paste0( getwd(), "/data/backgroundMapBasic.html"))

# GII Value einfügen

map <- spdf_fortified %>%
  left_join(. , GII, by=c("id"="Country"))

write.csv(map, file= "data/map.csv")

library(ggplot2)

ggplot() +
  geom_polygon(data = map, aes(fill= GII_Value , x = long, y = lat, group = group)) +
  theme_void() +
  coord_map()

m <- leaflet(map)%>% addTiles()  %>% setView( lat=51.1642292, lng=10.4541194 , zoom=5) %>%
  addPolygons(lat=51.1642292, lng=10.4541194, stroke = TRUE, fillOpacity = 0.9, color=  ~colorNumeric("mypalette"), weight= 0.3, smoothFactor = 0.5)
m


# my color palette 

library(RColorBrewer)

mypalette <- RColorBrewer::brewer.pal(8, "Accent")



```












```{r setup, include=FALSE}

# Landkarte herunterladen 

download.file("http://thematicmapping.org/downloads/TM_WORLD_BORDERS_SIMPL-0.3.zip" , destfile="data/world_shape_file.zip")

list.files("data/world_shape_file")

my_spdf <- shapefile("data/world_shape_file/TM_WORLD_BORDERS_SIMPL-0.3.shp")

my_spdf@data$POP2005[ which(my_spdf@data$POP2005 == 0)] = NA
my_spdf@data$POP2005 <- as.numeric(as.character(my_spdf@data$POP2005)) / 1000000 %>% round(2)



library(sf)
library(raster)
library(dplyr)
library(spData)
library(spDataLarge)
library(tmap)    
library(leaflet) 
library(ggplot2)
library(sp)


world <- world

class(world)

plot(world)

world_sp = as(world, Class = "Spatial")

# world_sf = st_as_sf(world_sp) 

merged_world <- left_join(world, GII, by= "name_long" )

plot(merged_world)

tm_shape(merged_world) + tm_fill(col = "GII_Value")

```